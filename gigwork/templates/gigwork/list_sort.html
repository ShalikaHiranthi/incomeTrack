{% extends 'base.html' %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/styles.css' %}">

<div class="home-container">
  <h1>Welcome to Gig Tracker</h1>
  <p>Manage your earnings, track your progress, and stay in control of your finances.</p>
  
  <div class="home-buttons">
    <a href="{% url 'sort_gigs' %}">View Gigworks by weeks</a>
    <a href="{% url 'gigwork_list' %}">View Gigworks</a>
    <a href="{% url 'add_gigwork' %}">Add Gigwork</a>
  </div>
</div>
<div class="home-container">
    <p class="total">Total Earnings: ${{ total_earnings|floatformat:2 }}</p>
    <form method="post">
      {% csrf_token %}
      <button type="submit" name="generate" value="1">Generate & Save to DB</button>
    </form>
  
    <h2>Monthly Earnings</h2>
    {% if half_month_earnings %}
  <table>
    <thead>
      <tr>
        <th>Month</th>
        <th>1st Half ($)</th>
        <th>2nd Half ($)</th>
        <th>Total ($)</th>
      </tr>
    </thead>
    <tbody>
      {% for item in half_month_earnings %}
      <tr>
        <td>{{ item.month|date:"F Y" }}</td>
        <td>${{ item.start|floatformat:2 }}</td>
        <td>${{ item.end|floatformat:2 }}</td>
        <td>${{ item.total|floatformat:2 }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
{% endif %}
  </div>
{% endblock %}
